# mysql-conf/my.cnf
# 适用于 Docker + M1 Mac 的 MySQL 8.0 基础配置

[mysqld]
# === 基础设置 ===
skip-name-resolve
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci
default-authentication-plugin = mysql_native_password

# === 网络与连接 ===
port = 3306
bind-address = 0.0.0.0
max_connections = 200
max_connect_errors = 1000

# === 字符集与排序 ===
init_connect = 'SET collation_connection = utf8mb4_unicode_ci'
init_connect = 'SET NAMES utf8mb4'

# === 日志设置（可选，调试用）===
# 已移除文件日志记录，以适配Docker容器日志输出

# === 存储引擎 ===
default-storage-engine = InnoDB
default_tmp_storage_engine = InnoDB

# === InnoDB 设置 ===
innodb_buffer_pool_size = 512M
innodb_log_file_size = 64M
innodb_file_per_table = 1
innodb_flush_log_at_trx_commit = 2
innodb_use_native_aio = 0

# === 时区 ===
# 注意：需配合 TZ 环境变量
default-time-zone = '+8:00'
